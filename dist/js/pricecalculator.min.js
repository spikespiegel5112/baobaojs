$.fn.extend({priceCalculator:function(a){function b(a){var b=$(i.unitprice).eq(a).text().replace("ï¿¥","");return b}function c(a,c){var e=b(a)*c;$(i.subtotal).eq(a).html(parseFloat(e).toFixed(2)),d(a,e)}function d(a,b){h[a]=b;for(var c=0,d=h.length-1;d>=0;d--)c+=h[d];$(i.totalprice).html(parseFloat(c).toFixed(2))}function e(a){a.length;$.each(a,function(b){var d=a.eq(b).find("input").val();c(b,d)})}function f(a){a.trigger("onchange")}var g=$(this),h=[],i={unitprice:"",subtotal:"",totalprice:"",onchange:function(){}};a&&$.extend(i,a),e(g),$.each(g,function(a){var b=$(this),d=b.find("input");b.find("a").on("click",function(){var b=d.val();switch($(this).index()){case 0:b--,0>b&&(b=0);break;case 2:b++}d.val(b),c(a,b),i.onchange(),f(d)}),d.on("keydown keyup",function(b){var e=$(this),g=0,h=b.charCode?b.charCode:b.keyCode;switch(b.type){case"keydown":8!=h&&37!=h&&39!=h&&48>h||h>57&&96>h||h>105?b.preventDefault():37!=h&&39!=h&&(0!=e.val()?0!=e.val():e.val(""));break;case"keyup":g=d.val(),c(a,g),i.onchange(),f(d)}})})}});